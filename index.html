<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="WellWalk">
<meta name="theme-color" content="#52a6e0">
<meta name="description" content="Il tuo compagno quotidiano per il benessere. Traccia routine, camminate e pensieri.">
<link rel="manifest" href="./manifest.json">
<link rel="apple-touch-icon" href="./icon-192.png">
<title>WellWalk Pro - SM</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700;800&display=swap" rel="stylesheet">
<style>
/* WellWalk Pro v4.2 - Production Beta */
:root{--primary:#52a6e0;--primary-dark:#3d8bc7;--secondary:#5fb894;--success:#7bc99c;--danger:#e97676;--bg:#FAFBFC;--text:#2d3748;--text-sec:#718096;--border:#e2e8f0;--shadow:0 4px 12px rgba(0,0,0,.08)}
[data-gender=F]{--primary:#e883b8;--primary-dark:#d96ba5;--secondary:#b98cc4}
[data-theme=dark]{--primary:#5eb3f0;--bg:#1a202c;--text:#f7fafc;--text-sec:#a0aec0;--border:#2d3748;--shadow:0 4px 12px rgba(0,0,0,.3)}
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
body{font-family:Poppins,-apple-system,sans-serif;background:var(--bg);color:var(--text);line-height:1.5;overflow-x:hidden}
.screen{display:none;min-height:100vh;padding:24px;padding-bottom:100px}
.screen.active{display:block;animation:fadeIn .3s}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
.container{max-width:500px;margin:0 auto}
.logo{width:140px;height:140px;margin:0 auto 32px;animation:grow 3s ease-in-out infinite}
@keyframes grow{0%,100%{transform:translateY(0) scale(1)}50%{transform:translateY(-10px) scale(1.05)}}
h1{font-size:2.25rem;text-align:center;margin-bottom:12px;font-weight:800}
.subtitle{text-align:center;color:var(--text-sec);margin-bottom:40px;font-size:1rem;line-height:1.6}
.card{background:#fff;border:2px solid var(--border);border-radius:20px;padding:24px;margin-bottom:16px;box-shadow:var(--shadow);transition:.2s}
[data-theme=dark] .card{background:#2d3748;border-color:#4a5568}
.form-group{margin-bottom:20px}
.form-row{display:grid;grid-template-columns:1fr 1fr;gap:16px}
label{display:block;font-size:.875rem;font-weight:600;color:var(--text-sec);margin-bottom:8px}
input,select,textarea{width:100%;padding:14px;border:2px solid var(--border);border-radius:14px;font:inherit;background:#fff;transition:.2s;font-size:1rem}
[data-theme=dark] input,[data-theme=dark] select,[data-theme=dark] textarea{background:#2d3748;color:#fff;border-color:#4a5568}
input:focus,select:focus,textarea:focus{outline:0;border-color:var(--primary);box-shadow:0 0 0 3px rgba(82,166,224,.15)}
textarea{resize:vertical;min-height:120px}
.btn{display:flex;align-items:center;justify-content:center;gap:10px;width:100%;padding:16px 24px;border:0;border-radius:14px;font:inherit;font-weight:700;cursor:pointer;transition:.2s;font-size:1.05rem}
.btn:active{transform:translateY(1px)}
.btn-primary{background:linear-gradient(135deg,var(--primary),var(--primary-dark));color:#fff;box-shadow:0 3px 0 var(--primary-dark),0 6px 12px rgba(82,166,224,.3)}
.btn-success{background:linear-gradient(135deg,var(--success),#5faa7f);color:#fff;box-shadow:0 3px 0 #5faa7f}
.btn-danger{background:linear-gradient(135deg,var(--danger),#d65555);color:#fff;box-shadow:0 3px 0 #d65555}
.btn-outline{background:rgba(82,166,224,.1);border:2px solid var(--primary);color:var(--primary);box-shadow:none;font-weight:600}
.icon-btn{width:52px;height:52px;border:2px solid var(--border);background:rgba(255,255,255,.9);border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:.2s;box-shadow:var(--shadow)}
[data-theme=dark] .icon-btn{background:rgba(45,55,72,.9);border-color:#4a5568}
.icon-btn:active{transform:scale(.95)}
.welcome-banner{background:linear-gradient(135deg,var(--primary),var(--secondary));color:#fff;padding:28px;border-radius:20px;display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;box-shadow:0 8px 20px rgba(82,166,224,.25)}
.streak-badge{display:flex;align-items:center;gap:10px;background:rgba(255,255,255,.25);backdrop-filter:blur(10px);padding:10px 18px;border-radius:999px;font-weight:700;font-size:1.2rem;border:2px solid rgba(255,255,255,.3)}
.date-nav{display:flex;gap:14px;margin-bottom:24px;align-items:center}
.date-display{flex:1;text-align:center;background:#fff;border:2px solid var(--border);border-radius:16px;padding:18px;box-shadow:var(--shadow)}
[data-theme=dark] .date-display{background:#2d3748;border-color:#4a5568}
.date-main{font-weight:700;font-size:1.1rem}
.date-sub{font-size:.9rem;color:var(--text-sec);margin-top:2px}
.progress-bar-wrapper{background:var(--bg);border-radius:999px;height:18px;overflow:hidden;border:2px solid var(--border);position:relative;box-shadow:inset 0 2px 4px rgba(0,0,0,.06);margin:28px 0 12px}
.progress-bar{height:100%;background:linear-gradient(90deg,var(--primary),var(--secondary));border-radius:999px;transition:width .6s;position:relative}
.progress-label{text-align:center;margin-bottom:20px;font-size:.95rem;font-weight:600;color:var(--text-sec)}
.progress-percentage{font-size:1.35rem;font-weight:800;color:var(--primary)}
.quote-card{background:linear-gradient(135deg,#fff9e6,#fff0cc);border:2px solid #ffdc73!important;position:relative;overflow:hidden}
[data-theme=dark] .quote-card{background:linear-gradient(135deg,#4a3c1f,#6b5328);border-color:#a8824c!important}
.quote-text{font-size:1.05rem;font-style:italic;color:#8b6914;margin-bottom:14px;line-height:1.7}
[data-theme=dark] .quote-text{color:#f2d89c}
.quote-author{font-size:.9rem;font-weight:700;color:#a87d1a;text-align:right}
.card-header{display:flex;justify-content:space-between;align-items:center;cursor:pointer;user-select:none;padding:4px 0}
.card-title{display:flex;align-items:center;gap:10px;font-size:1.2rem;font-weight:700}
.icon{width:26px;height:26px;color:var(--primary);stroke-width:2.5}
.expandable{max-height:0;overflow:hidden;transition:max-height .4s}
.expandable.expanded{max-height:3000px;padding-top:20px}
.expand-icon{transition:transform .3s;color:var(--text-sec)}
.expand-icon.rotated{transform:rotate(180deg)}
.routine-item{display:flex;align-items:center;gap:14px;padding:16px;background:rgba(82,166,224,.06);border:2px solid var(--border);border-radius:14px;margin-bottom:10px;cursor:pointer;transition:.2s}
[data-theme=dark] .routine-item{background:rgba(94,179,240,.08);border-color:#4a5568}
.routine-item:active{transform:scale(.98)}
.routine-item.completed{background:rgba(123,201,156,.12);border-color:var(--success)}
.routine-item input[type=checkbox]{width:26px;height:26px;cursor:pointer;accent-color:var(--success)}
.routine-item label{flex:1;margin:0;cursor:pointer;font-weight:500;font-size:1.05rem}
.routine-item.completed label{text-decoration:line-through;opacity:.65}
.timer-display{text-align:center;font-size:clamp(3.5rem,12vw,5rem);font-weight:800;font-family:-apple-system,BlinkMacSystemFont,sans-serif;color:var(--primary);margin:32px 0;letter-spacing:.03em;text-shadow:0 2px 8px rgba(82,166,224,.2)}
.stats-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;margin:24px 0}
.stat-card{text-align:center;padding:18px;background:rgba(82,166,224,.06);border:2px solid var(--border);border-radius:14px;transition:.2s}
[data-theme=dark] .stat-card{background:rgba(94,179,240,.08);border-color:#4a5568}
.stat-icon{width:36px;height:36px;margin:0 auto 10px;color:var(--primary)}
.stat-value{font-size:1.75rem;font-weight:800;line-height:1}
.stat-label{font-size:.75rem;color:var(--text-sec);text-transform:uppercase;margin-top:6px;letter-spacing:.05em;font-weight:600}
.controls{display:grid;grid-template-columns:1fr 1fr;gap:14px}
.badges-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:14px}
.badge{aspect-ratio:1;display:flex;flex-direction:column;align-items:center;justify-content:center;background:rgba(82,166,224,.06);border:2px solid var(--border);border-radius:18px;padding:10px;cursor:pointer;transition:.2s;position:relative}
[data-theme=dark] .badge{background:rgba(94,179,240,.08);border-color:#4a5568}
.badge:active{transform:scale(.95)}
.badge.unlocked{background:linear-gradient(135deg,#fff9e6,#fff0cc);border-color:#ffdc73;box-shadow:0 4px 12px rgba(255,220,115,.3)}
.badge-icon{font-size:2.8rem;filter:grayscale(100%);transition:filter .3s}
.badge.unlocked .badge-icon{filter:grayscale(0%)}
.badge-name{font-size:.7rem;font-weight:700;color:var(--text-sec);text-align:center;margin-top:6px}
.music-links{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;margin:20px 0}
.music-btn{display:flex;flex-direction:column;align-items:center;gap:10px;padding:18px 14px;background:rgba(82,166,224,.06);border:2px solid var(--border);border-radius:14px;cursor:pointer;text-decoration:none;color:var(--text);transition:.2s}
.recording-indicator{display:flex;align-items:center;justify-content:center;gap:10px;padding:14px;background:rgba(233,118,118,.1);border:2px solid var(--danger);border-radius:14px;color:var(--danger);font-weight:600;margin:16px 0}
.recording-dot{width:14px;height:14px;background:var(--danger);border-radius:50%;animation:pulse 1.5s infinite}
@keyframes pulse{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.5;transform:scale(1.3)}}
.fab{position:fixed;bottom:28px;right:28px;width:68px;height:68px;background:linear-gradient(135deg,var(--primary),var(--primary-dark));color:#fff;border:0;border-radius:50%;box-shadow:0 8px 24px rgba(82,166,224,.4);cursor:pointer;z-index:1000;transition:.2s}
.fab:active{transform:translateY(2px)}
.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);backdrop-filter:blur(10px);z-index:2000;align-items:center;justify-content:center;padding:24px}
.modal.active{display:flex}
.modal-content{background:#fff;border:2px solid var(--border);border-radius:24px;padding:32px;max-width:420px;width:100%;max-height:85vh;overflow-y:auto;box-shadow:0 20px 60px rgba(0,0,0,.3)}
[data-theme=dark] .modal-content{background:#2d3748;border-color:#4a5568}
.modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}
.modal-title{font-size:1.6rem;margin-bottom:12px;font-weight:800}
.modal-text{color:var(--text-sec);margin-bottom:28px;font-size:1.05rem;line-height:1.6}
.settings-list{display:flex;flex-direction:column;gap:10px}
.setting-item{display:flex;align-items:center;justify-content:space-between;padding:18px;background:rgba(82,166,224,.06);border:2px solid var(--border);border-radius:14px;cursor:pointer;transition:.2s}
[data-theme=dark] .setting-item{background:rgba(94,179,240,.08);border-color:#4a5568}
.setting-left{display:flex;align-items:center;gap:14px}
.toggle{position:relative;width:56px;height:30px;background:var(--border);border-radius:999px;cursor:pointer;transition:.3s;border:2px solid var(--border)}
.toggle.active{background:var(--primary);border-color:var(--primary)}
.toggle-thumb{position:absolute;top:2px;left:2px;width:24px;height:24px;background:#fff;border-radius:50%;transition:.3s;box-shadow:0 2px 6px rgba(0,0,0,.2)}
.toggle.active .toggle-thumb{transform:translateX(26px)}
.week-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:10px;margin-bottom:20px}
.day-cell{aspect-ratio:1;display:flex;flex-direction:column;align-items:center;justify-content:center;background:rgba(82,166,224,.06);border:2px solid var(--border);border-radius:12px;font-size:.8rem;font-weight:600;cursor:pointer;transition:.2s}
[data-theme=dark] .day-cell{background:rgba(94,179,240,.08);border-color:#4a5568}
.day-cell:hover{background:rgba(82,166,224,.12);transform:translateY(-2px)}
.day-cell.active{background:linear-gradient(135deg,var(--success),#5faa7f);border-color:var(--success);color:#fff}
.day-name{font-size:.65rem;opacity:.75;margin-bottom:2px}
.weather-widget{display:flex;align-items:center;gap:12px;padding:16px;background:rgba(82,166,224,.08);border:2px solid var(--border);border-radius:14px;margin:16px 0}
.weather-icon{font-size:3rem}
.weather-info{flex:1}
.weather-temp{font-size:1.8rem;font-weight:800;color:var(--primary)}
.weather-desc{font-size:.9rem;color:var(--text-sec);text-transform:capitalize}
.hidden{display:none!important}
.mb-0{margin-bottom:0!important}
.mt-4{margin-top:20px}
.version-badge{position:fixed;bottom:10px;left:10px;background:rgba(0,0,0,.6);color:#fff;padding:4px 10px;border-radius:8px;font-size:.7rem;z-index:999;font-weight:600}
@media(max-width:640px){.screen{padding:20px 16px}h1{font-size:1.9rem}.timer-display{font-size:3.5rem}.badges-grid{grid-template-columns:repeat(3,1fr)}.fab{bottom:20px;right:20px;width:60px;height:60px}}
</style>
</head>
<body>
<div class="version-badge">v4.2 beta</div>
<!-- Welcome Screen con Logo SM ottimizzato -->
<div id="screen-welcome" class="screen">
<div class="container">
<svg class="logo" viewBox="0 0 140 140">
<defs><linearGradient id="g1" x1="0%" y1="0%" x2="100%" y2="100%">
<stop offset="0%" style="stop-color:#52a6e0"/><stop offset="100%" style="stop-color:#5fb894"/>
</linearGradient></defs>
<circle cx="70" cy="70" r="64" stroke="url(#g1)" stroke-width="5" fill="none" opacity=".2"/>
<text x="70" y="55" text-anchor="middle" font-family="Poppins" font-weight="800" font-size="38" fill="url(#g1)">SM</text>
<path d="M35 85 L48 73 L58 78 L68 63 L78 68 L88 58 L98 63" stroke="url(#g1)" stroke-width="5" fill="none" stroke-linecap="round"/>
<path d="M98 63 L92 56 L98 56 Z" fill="url(#g1)"/>
<circle cx="70" cy="70" r="64" stroke="url(#g1)" stroke-width="5" fill="none"/>
<circle cx="48" cy="73" r="4" fill="url(#g1)" opacity=".6"/>
<circle cx="68" cy="63" r="4" fill="url(#g1)" opacity=".8"/>
<circle cx="88" cy="58" r="4" fill="url(#g1)"/>
</svg>
<h1>WellWalk Pro</h1>
<p class="subtitle">Il tuo compagno di crescita personale.<br>Mente e corpo, insieme ogni giorno.</p>
<div class="card">
<div class="form-group"><label>Nome</label><input type="text" id="userName" placeholder="Come ti chiami?" maxlength="20"></div>
<div class="form-row">
<div class="form-group mb-0"><label>Et√†</label><input type="number" id="userAge" placeholder="25" min="1" max="120"></div>
<div class="form-group mb-0"><label>Sesso</label><select id="userGender"><option value="">Seleziona</option><option value="M">Maschio</option><option value="F">Femmina</option><option value="A">Altro</option></select></div>
</div>
<button class="btn btn-primary mt-4" onclick="saveProfile()"><span>Inizia il Viaggio</span></button>
</div></div></div>

<!-- Screen Routine Setup -->
<div id="screen-routines" class="screen">
<div class="container">
<h1>Le Tue Routine</h1>
<p class="subtitle">Crea fino a 10 abitudini quotidiane da tracciare.</p>
<div class="card">
<div id="routineList"></div>
<div style="text-align:center;margin:20px 0;font-size:.95rem;font-weight:600;color:var(--text-sec)"><span id="routineCount" style="font-size:1.4rem;color:var(--primary)">0</span> / 10 routine</div>
<button class="btn btn-outline" onclick="addRoutine()" id="addRoutineBtn"><span>+ Aggiungi Routine</span></button>
<button class="btn btn-primary mt-4" onclick="saveRoutines()"><span>Continua</span></button>
</div></div></div>

<!-- Main App Screen -->
<div id="screen-main" class="screen">
<div class="container">
<!-- Weather Widget Meteo API -->
<div id="weatherWidget" class="weather-widget hidden">
<div class="weather-icon" id="weatherIcon">‚õÖ</div>
<div class="weather-info">
<div class="weather-temp" id="weatherTemp">--¬∞</div>
<div class="weather-desc" id="weatherDesc">Caricamento meteo...</div>
</div>
</div>

<div class="welcome-banner"><h2 id="welcomeMessage">Ciao!</h2><div class="streak-badge"><span>üî•</span><span id="streakDays">0</span></div></div>
<div class="date-nav">
<button class="icon-btn" onclick="changeDay(-1)"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M15 18l-6-6 6-6"/></svg></button>
<div class="date-display"><div class="date-main" id="currentDate"></div><div class="date-sub" id="currentDay"></div></div>
<button class="icon-btn" onclick="changeDay(1)"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M9 18l6-6-6-6"/></svg></button>
</div>

<div class="card quote-card"><p class="quote-text" id="quoteText"></p><div class="quote-author" id="quoteAuthor"></div></div>

<div class="card">
<div class="card-header" onclick="toggleRoutines()">
<h3 class="card-title"><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M9 11l3 3L22 4"/></svg>Routine <span id="routineSummary">0/0</span></h3>
<svg class="icon expand-icon" id="routinesIcon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M6 9l6 6 6-6"/></svg>
</div>
<div class="expandable expanded" id="routinesContent">
<div class="progress-bar-wrapper"><div class="progress-bar" id="progressBar" style="width:0%"></div></div>
<div class="progress-label"><span class="progress-percentage" id="progressPercentage">0%</span> Completato</div>
<div id="routineChecklist"></div>
</div></div>

<div class="card">
<h3 class="card-title"><svg class="icon" viewBox="0 0 24 24" fill="currentColor"><path d="M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM9.8 8.9L7 23h2.1l1.8-8 2.1 2v6h2v-7.5l-2.1-2 .6-3C14.8 12 16.8 13 19 13v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1L6 8.3V13h2V9.6l1.8-.7"/></svg>Camminata</h3>
<div class="timer-display" id="timerDisplay">00:00:00</div>
<div class="stats-grid">
<div class="stat-card"><svg class="stat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M12 2L2 7l10 5 10-5z"/></svg><div class="stat-value" id="distanceDisplay">0.0</div><div class="stat-label">km</div></div>
<div class="stat-card"><svg class="stat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg><div class="stat-value" id="speedDisplay">0.0</div><div class="stat-label">km/h</div></div>
<div class="stat-card"><svg class="stat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="9" cy="7" r="4"/></svg><div class="stat-value" id="caloriesDisplay">0</div><div class="stat-label">kcal</div></div>
</div>
<button class="btn btn-success" onclick="toggleWalk()" id="walkBtn"><svg class="icon" id="walkBtnIcon" viewBox="0 0 24 24" fill="currentColor"><path d="M5 3l14 9-14 9V3z"/></svg><span id="walkBtnText">Inizia</span></button>
</div>

<div class="card">
<div class="card-header" onclick="toggleBrainstorm()">
<h3 class="card-title"><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M12 2.69l5.66 5.66a8 8 0 11-11.31 0z"/></svg>Brainstorming</h3>
<svg class="icon expand-icon" id="brainstormIcon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M6 9l6 6 6-6"/></svg>
</div>
<div class="expandable" id="brainstormContent">
<div id="recordingIndicator" class="recording-indicator hidden"><div class="recording-dot"></div><span>Registrazione...</span></div>
<div class="controls">
<button class="btn btn-outline" onclick="startRecording()" id="startRecordBtn"><span>üéôÔ∏è Registra</span></button>
<button class="btn btn-outline" onclick="stopRecording()" id="stopRecordBtn" disabled><span>‚èπÔ∏è Stop</span></button>
</div>
<textarea id="brainstormNotes" placeholder="Scrivi i tuoi pensieri..." onchange="saveBrainstorm()" style="margin-top:16px"></textarea>
<button class="btn btn-primary" onclick="exportNotes()" style="margin-top:16px"><span>üíæ Esporta</span></button>
</div></div>

<div class="card">
<div class="card-header" onclick="toggleMusic()">
<h3 class="card-title"><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/></svg>Musica</h3>
<svg class="icon expand-icon" id="musicIcon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M6 9l6 6 6-6"/></svg>
</div>
<div class="expandable" id="musicContent">
<div class="music-links">
<a href="https://open.spotify.com" class="music-btn" target="_blank"><span style="font-size:2.5rem">üéµ</span><span style="font-size:.8rem;font-weight:700">Spotify</span></a>
<a href="https://music.youtube.com" class="music-btn" target="_blank"><span style="font-size:2.5rem">‚ñ∂Ô∏è</span><span style="font-size:.8rem;font-weight:700">YouTube</span></a>
<a href="https://music.apple.com" class="music-btn" target="_blank"><span style="font-size:2.5rem">üéß</span><span style="font-size:.8rem;font-weight:700">Apple</span></a>
</div>
</div></div>

<div class="card">
<div class="card-header" onclick="toggleBadges()">
<h3 class="card-title"><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>Traguardi</h3>
<svg class="icon expand-icon" id="badgesIcon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M6 9l6 6 6-6"/></svg>
</div>
<div class="expandable" id="badgesContent"><div class="badges-grid" id="badgesGrid"></div></div>
</div>

<div class="card">
<div class="card-header" onclick="toggleAnalytics()">
<h3 class="card-title"><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M18 20V10M12 20V4M6 20v-6"/></svg>Settimana</h3>
<svg class="icon expand-icon" id="analyticsIcon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M6 9l6 6 6-6"/></svg>
</div>
<div class="expandable" id="analyticsContent">
<div class="week-grid" id="weekGrid"></div>
<div class="stats-grid">
<div class="stat-card"><div class="stat-value" id="activeDays">0/7</div><div class="stat-label">Giorni</div></div>
<div class="stat-card"><div class="stat-value" id="totalKm">0 km</div><div class="stat-label">Distanza</div></div>
<div class="stat-card"><div class="stat-value" id="completedRoutines">0%</div><div class="stat-label">Routine</div></div>
</div></div></div>

<button class="fab" onclick="showSettings()"><svg style="width:32px;height:32px" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><circle cx="12" cy="12" r="3"/><path d="M12 1v6m0 6v6"/></svg></button>
</div></div>

<!-- Modals -->
<div id="settingsModal" class="modal">
<div class="modal-content">
<div class="modal-header"><h2>Impostazioni</h2><button class="icon-btn" onclick="closeSettings()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M18 6L6 18M6 6l12 12"/></svg></button></div>
<div class="settings-list">
<div class="setting-item" onclick="toggleTheme()"><div class="setting-left"><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><span>Dark Mode</span></div><div class="toggle" id="themeToggle"><div class="toggle-thumb"></div></div></div>
<div class="setting-item" onclick="editProfile()"><div class="setting-left"><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="12" cy="7" r="4"/></svg><span>Profilo</span></div></div>
<div class="setting-item" onclick="editRoutines()"><div class="setting-left"><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"/></svg><span>Routine</span></div></div>
<div class="setting-item" onclick="exportData()"><div class="setting-left"><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5"/></svg><span>Esporta</span></div></div>
<div class="setting-item" onclick="resetApp()" style="color:var(--danger)"><div class="setting-left"><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M3 6h18"/></svg><span>Reset</span></div></div>
</div></div></div>

<div id="badgeModal" class="modal">
<div class="modal-content">
<div class="modal-header"><h2>Traguardo</h2><button class="icon-btn" onclick="closeBadgeModal()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M18 6L6 18M6 6l12 12"/></svg></button></div>
<div style="text-align:center"><div style="font-size:6rem;margin-bottom:20px" id="badgeModalIcon"></div><h2 class="modal-title" id="badgeModalTitle"></h2><p class="modal-text" id="badgeModalDesc"></p><button class="btn btn-primary" onclick="closeBadgeModal()"><span>Chiudi</span></button></div>
</div></div>

<div id="dayModal" class="modal">
<div class="modal-content">
<div class="modal-header"><h2 id="dayModalTitle">Dettagli</h2><button class="icon-btn" onclick="closeDayModal()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M18 6L6 18M6 6l12 12"/></svg></button></div>
<div id="dayModalContent"></div>
</div></div>

<script>
</script>
<script src="./app.js"></script>
</body>
</html>
